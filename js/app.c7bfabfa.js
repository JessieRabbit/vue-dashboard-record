(function(){var t={4254:function(){const t=localStorage.getItem("theme");t&&document.documentElement.setAttribute("data-bs-theme",t)},1949:function(t,e,s){"use strict";var a=s(6369),i=s(1076),o=s(6423),r=s(4961),n=s.n(r),c=s(5708),l=s(5522),d=s(8815),u=s(6391),p=s.n(u),m=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},v=[],h=s(1001),g={},f=(0,h.Z)(g,m,v,!1,null,null,null),b=f.exports,_=s(2631),C=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"auth"}},[e("div",{staticClass:"row h-100"},[e("div",{staticClass:"col-lg-5 col-12"},[e("div",{attrs:{id:"auth-left"}},[e("h1",{staticClass:"auth-title"},[t._v("請先登入")]),e("p",{staticClass:"auth-subtitle mb-5"},[t._v(" Log in with your data. ")]),e("form",{on:{submit:function(e){return e.preventDefault(),t.signin.apply(null,arguments)}}},[e("div",{staticClass:"form-group position-relative has-icon-left mb-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control form-control-xl",attrs:{type:"text",placeholder:"name@example.com",name:"username"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),t._m(0)]),e("div",{staticClass:"form-group position-relative has-icon-left mb-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control form-control-xl",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t._m(1)]),e("button",{staticClass:"btn btn-primary btn-block btn-lg shadow-lg mt-5"},[t._v("Log in")])])])]),t._m(2)])])},k=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"form-control-icon"},[e("i",{staticClass:"bi bi-person"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"form-control-icon"},[e("i",{staticClass:"bi bi-shield-lock"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-7 d-none d-lg-block"},[e("div",{attrs:{id:"auth-right"}})])}],y=(s(560),{name:"LoginView",data(){return{user:{username:"",password:""}}},methods:{signin(){const t="https://vue-course-api.hexschool.io/admin/signin",e=this;this.$http.post(t,e.user).then((t=>{if(t.data.success){const{token:s,expired:a}=t.data;document.cookie=`hexToken=${s};expires=${new Date(a)};`,e.$router.push("/admin/products")}}))}}}),x=y,w=(0,h.Z)(x,C,k,!1,null,"84edf1ae",null),P=w.exports,$=function(){var t=this,e=t._self._c;return e("div",[e("Alert"),e("div",{staticClass:"container-fluid"},[e("Siderbar"),e("main",{attrs:{id:"main"}},[t._m(0),e("div",{staticClass:"page-heading"},[e("router-view")],1),e("Footer")],1)],1)],1)},L=[function(){var t=this,e=t._self._c;return e("header",{staticClass:"mb-3"},[e("a",{staticClass:"burger-btn d-block d-xl-none",attrs:{href:"#"}},[e("i",{staticClass:"bi bi-justify fs-3"})])])}];const M="theme",T=function(t,e=!1){document.body.classList.add(t),document.documentElement.setAttribute("data-bs-theme",t),e&&localStorage.setItem(M,t)};function E(){const t=localStorage.getItem(M);if(t)return T(t);if(!window.matchMedia)return"";const e=window.matchMedia("(prefers-color-scheme: dark)");return e.addEventListener("change",(t=>T(t.matches?"dark":"light",!0))),T(e.matches?"dark":"light",!0)}E();var O=T,j=t=>t.innerWidth>1200;class I{constructor(t,e={}){this.sidebarEL=t instanceof HTMLElement?t:document.querySelector(t),this.options=e,this.init()}onResize(){j(window)?(this.sidebarEL.classList.add("active"),this.sidebarEL.classList.remove("inactive")):this.sidebarEL.classList.remove("active"),this.deleteBackdrop(),this.toggleOverflowBody(!0)}init(){document.querySelectorAll(".burger-btn").forEach((t=>t.addEventListener("click",this.toggle.bind(this)))),document.querySelectorAll(".sidebar-hide").forEach((t=>t.addEventListener("click",this.toggle.bind(this)))),window.addEventListener("resize",this.onResize.bind(this))}createBackdrop(){if(j(window))return;this.deleteBackdrop();const t=document.createElement("div");t.classList.add("sidebar-backdrop"),t.addEventListener("click",this.hide.bind(this)),document.body.appendChild(t)}deleteBackdrop(){const t=document.querySelector(".sidebar-backdrop");this.backdrop=t,t&&t.remove()}toggleOverflowBody(t){if(j(window))return;const e=this.sidebarEL.classList.contains("active"),s=document.querySelector("body");s.style.overflowY="undefined"===typeof t?e?"hidden":"auto":t?"auto":"hidden"}show(){this.sidebarEL.classList.add("active"),this.sidebarEL.classList.remove("inactive"),this.createBackdrop(),this.toggleOverflowBody()}hide(){console.log("2"),this.sidebarEL.classList.remove("active"),this.sidebarEL.classList.add("inactive"),this.deleteBackdrop(),this.toggleOverflowBody()}toggle(){const t=this.sidebarEL.classList.contains("active");t?(console.log("1"),this.hide()):this.show()}}const N=document.getElementById("sidebar"),S=function(t){if(!N)return;j(window)&&(t.classList.add("active"),t.classList.add("sidebar-desktop"));const e=document.querySelectorAll(".sidebar-item.has-sub .submenu");for(let s=0;s<e.length;s+=1){const t=e[s],a=t.parentElement;a.classList.contains("active")?t.classList.add("submenu-open"):t.classList.add("submenu-closed")}};window.Sidebar=I;var Z=S,A=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"sidebar"}},[e("div",{staticClass:"sidebar-wrapper active"},[e("div",{staticClass:"sidebar-header position-relative"},[e("div",{staticClass:"d-flex justify-content-between align-items-center"},[t._m(0),e("div",{staticClass:"theme-toggle d-flex gap-2 align-items-center mt-2"},[e("svg",{staticClass:"iconify iconify--system-uicons",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"20",height:"20",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 21 21"}},[e("g",{attrs:{fill:"none","fill-rule":"evenodd",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round"}},[e("path",{attrs:{d:"M10.5 14.5c2.219 0 4-1.763 4-3.982a4.003 4.003 0 0 0-4-4.018c-2.219\n                0-4 1.781-4 4c0 2.219 1.781 4 4 4zM4.136 4.136L5.55 5.55m9.9 9.9l1.414\n                1.414M1.5 10.5h2m14 0h2M4.135 16.863L5.55 15.45m9.899-9.9l1.414-1.415M10.5\n                19.5v-2m0-14v-2",opacity:".3"}}),e("g",{attrs:{transform:"translate(-210 -1)"}},[e("path",{attrs:{d:"M220.5 2.5v2m6.5.5l-1.5 1.5"}}),e("circle",{attrs:{cx:"220.5",cy:"11.5",r:"4"}}),e("path",{attrs:{d:"m214 5l1.5 1.5m5 14v-2m6.5-.5l-1.5-1.5M214 18l1.5-1.5m-4-5h2m14 0h2"}})])])]),t._m(1),e("svg",{staticClass:"iconify iconify--mdi",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",width:"20",height:"20",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"}},[e("path",{attrs:{fill:"currentColor",d:"m17.75 4.09l-2.53 1.94l.91 3.06l-2.63-1.81l-2.63\n                1.81l.91-3.06l-2.53-1.94L12.44 4l1.06-3l1.06\n                3l3.19.09m3.5 6.91l-1.64 1.25l.59 1.98l-1.7-1.17l-1.7\n                1.17l.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95l2.06.05m-2.28\n                4.95c.83-.08 1.72 1.1 1.19 1.85c-.32.45-.66.87-1.08 1.27C15.17\n                  23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14c.4-.4.82-.76\n                  1.27-1.08c.75-.53 1.93.36 1.85 1.19c-.27 2.86.69 5.83 2.89\n                    8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0\n                    1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82c-2.81 3.14-2.7 7.96.31\n                      10.98c3.02 3.01 7.84 3.12 10.98.31Z"}})])]),t._m(2)])]),e("div",{staticClass:"sidebar-menu"},[e("ul",{staticClass:"menu"},[e("li",{staticClass:"sidebar-title"},[t._v("管理員")]),e("li",{staticClass:"sidebar-item",class:{active:"products"===t.active},on:{click:function(e){t.active="products"},keydown:function(e){t.active="products"}}},[e("router-link",{staticClass:"sidebar-link",attrs:{to:"/admin/products"}},[e("i",{staticClass:"bi bi-box-seam-fill"}),e("span",[t._v("產品列表")])])],1),e("li",{staticClass:"sidebar-item",class:{active:"orders"===t.active},on:{click:function(e){t.active="orders"},keydown:function(e){t.active="orders"}}},[e("router-link",{staticClass:"sidebar-link",attrs:{to:"/admin/orders"}},[e("i",{staticClass:"bi bi-card-list"}),e("span",[t._v("訂單列表")])])],1),e("li",{staticClass:"sidebar-item",class:{active:"ticket"===t.active},on:{click:function(e){t.active="ticket"},keydown:function(e){t.active="ticket"}}},[e("router-link",{staticClass:"sidebar-link",attrs:{to:"/admin/ticket"}},[e("i",{staticClass:"bi bi-ticket-fill"}),e("span",[t._v("優惠券")])])],1),e("li",{staticClass:"sidebar-title"},[t._v("模擬功能")]),e("li",{staticClass:"sidebar-item",class:{active:"customer_order"===t.active},on:{click:function(e){t.active="customer_order"},keydown:function(e){t.active="customer_order"}}},[e("router-link",{staticClass:"sidebar-link",attrs:{to:"/customer_order"}},[e("i",{staticClass:"bi bi-cart4"}),e("span",[t._v("模擬訂單")])])],1),e("li",{staticClass:"sidebar-title"},[t._v("Authentication")]),e("li",{staticClass:"sidebar-item",class:{active:"logout"===t.active},on:{click:function(e){t.active="logout"},keydown:function(e){t.active="logout"}}},[e("a",{staticClass:"sidebar-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.logout.apply(null,arguments)}}},[e("i",{staticClass:"bi bi-door-closed-fill"}),e("span",[t._v("登出")])])])])])])])},q=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"avatar avatar-xl me-3"},[e("img",{staticStyle:{height:"60px"},attrs:{src:s(3397),alt:"",srcset:""}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"form-check form-switch fs-6"},[e("input",{staticClass:"form-check-input me-0",staticStyle:{cursor:"pointer"},attrs:{type:"checkbox",id:"toggle-dark"}}),e("label",{staticClass:"form-check-label"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"sidebar-toggler x"},[e("a",{staticClass:"sidebar-hide d-xl-none d-block",attrs:{href:"#","aria-label":"Middle"}},[e("i",{staticClass:"bi bi-x bi-middle"})])])}],B={name:"SiderbarView",data(){return{active:"products"}},methods:{logout(){const t="https://vue-course-api.hexschool.io/logout",e=this;this.$http.post(t).then((t=>{t.data.success&&e.$router.push("/login")}))}}},D=B,U=(0,h.Z)(D,A,q,!1,null,null,null),F=U.exports,V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"message-alert"},t._l(t.messages,(function(s,a){return e("div",{key:a,staticClass:"alert alert-dismissible show fade",class:"alert-"+s.status},[t._v(" "+t._s(s.message)+" "),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"alert","aria-label":"Close"},on:{click:function(e){return t.removeMessage(a)}}})])})),0)},z=[],R={name:"AlertMessage",data(){return{messages:[]}},methods:{updateMessage(t,e){const s=Math.floor(new Date/1e3);this.messages.push({message:t,status:e,timestamp:s}),this.removeMessageWithTiming(s)},removeMessage(t){this.messages.splice(t,1)},removeMessageWithTiming(t){const e=this;setTimeout((()=>{e.messages.forEach(((s,a)=>{s.timestamp===t&&e.messages.splice(a,1)}))}),5e3)}},created(){const t=this;t.$bus.$on("message:push",((e,s="warning")=>{t.updateMessage(e,s)}))}},W=R,Y=(0,h.Z)(W,V,z,!1,null,null,null),H=Y.exports,J=function(){var t=this;t._self._c;return t._m(0)},Q=[function(){var t=this,e=t._self._c;return e("footer",[e("div",{staticClass:"footer clearfix mb-0 text-muted"},[e("div",{staticClass:"float-start"},[e("p",[t._v("2024 © Fruits")])]),e("div",{staticClass:"float-end"},[e("p",[t._v(" Crafted with "),e("span",{staticClass:"text-danger"},[e("i",{staticClass:"bi bi-heart-fill icon-mid"})]),t._v(" by "),e("a",{attrs:{href:"#"}},[t._v("Jessie")])])])])])}],G={name:"FooterView"},K=G,X=(0,h.Z)(K,J,Q,!1,null,null,null),tt=X.exports,et={name:"DashboardView",components:{Siderbar:F,Alert:H,Footer:tt},created(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=`${t}`},mounted(){const t="theme";this.$nextTick((()=>{const e=document.getElementById("toggle-dark"),s=localStorage.getItem(t);e&&(e.checked="dark"===s,e.addEventListener("input",(t=>{O(t.target.checked?"dark":"light",!0)})));const a=document.getElementById("sidebar");if("loading"!==document.readyState?Z(a):window.addEventListener("DOMContentLoaded",(()=>Z(a))),a){const t=new window.Sidebar(a);console.log("sidebar",t)}}))}},st=et,at=(0,h.Z)(st,$,L,!1,null,null,null),it=at.exports,ot=function(){var t=this,e=t._self._c;return e("div",[t.isLoading?e("div",{staticClass:"spinner-loading is-active is-full-page"},[e("div",{staticClass:"loading-background"}),e("img",{staticClass:"loading-icon",attrs:{src:s(578),alt:"audio"}})]):t._e(),e("div",{staticClass:"text-end my-4"},[e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openModal(!0)}}},[t._v("建立新的產品")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover mb-0"},[t._m(0),e("tbody",t._l(t.products,(function(s){return e("tr",{key:s.id},[e("td",{staticClass:"text-bold-500"},[t._v(t._s(s.category))]),e("td",[t._v(t._s(s.title))]),e("td",{staticClass:"text-end text-bold-500"},[t._v(t._s(t._f("currency")(s.origin_price)))]),e("td",{staticClass:"text-end"},[t._v(t._s(t._f("currency")(s.price)))]),e("td",[s.is_enabled?e("span",{staticClass:"text-success fw-bolder"},[t._v("啟用")]):e("span",[t._v("未啟用")])]),e("td",{staticClass:"text-center"},[e("button",{staticClass:"btn btn-outline-primary btn-sm me-4",on:{click:function(e){return t.openModal(!1,s)}}},[t._v(" 編輯 ")]),e("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(e){return t.openDeleteModal(s)}}},[t._v(" 刪除 ")])])])})),0)])])])])]),e("Pagination",{attrs:{pagination:t.pagination},on:{pageEvent:e=>t.getProducts(e)}}),e("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[e("div",{staticClass:"modal-header bg-primary text-white"},[t._m(1),e("button",{staticClass:"btn-close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(e){return t.hideModal("productModal")}}})]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-group mb-3"},[e("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl,expression:"tempProduct.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProduct.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"imageUrl",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"customFile"}},[t._v("或 上傳圖片 "),t.status.fileUploadLoading?e("i",{staticClass:"fas fa-solid fa-cog fa-spin fa-spin-reverse"}):t._e()]),e("input",{ref:"files",staticClass:"form-control",attrs:{type:"file",id:"customFile"},on:{change:t.uploadFile,input:function(e){t.tempProduct.image=e.target.files[0].name}}})]),e("img",{staticClass:"img-fluid mt-2",attrs:{src:t.tempProduct.imageUrl,alt:""}})]),e("div",{staticClass:"col-sm-8"},[e("div",{staticClass:"form-group mb-3"},[e("label",{attrs:{for:"title"}},[t._v("標題")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempProduct.title},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"title",e.target.value)}}})]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6 mb-3"},[e("label",{attrs:{for:"category"}},[t._v("分類")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"category",e.target.value)}}})]),e("div",{staticClass:"form-group col-md-6 mb-3"},[e("label",{attrs:{for:"price"}},[t._v("單位")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"unit",e.target.value)}}})])]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6 mb-3"},[e("label",{attrs:{for:"origin_price"}},[t._v("原價")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"origin_price",e.target.value)}}})]),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"price"}},[t._v("售價")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProduct.price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"price",e.target.value)}}})])]),e("hr"),e("div",{staticClass:"form-group mb-3"},[e("label",{attrs:{for:"description"}},[t._v("產品描述")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"請輸入產品描述"},domProps:{value:t.tempProduct.description},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"description",e.target.value)}}})]),e("div",{staticClass:"form-group mb-3"},[e("label",{attrs:{for:"content"}},[t._v("說明內容")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"form-control",attrs:{type:"text",id:"content",placeholder:"請輸入產品說明內容"},domProps:{value:t.tempProduct.content},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"content",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.is_enabled,expression:"tempProduct.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempProduct.is_enabled)?t._i(t.tempProduct.is_enabled,null)>-1:t._q(t.tempProduct.is_enabled,1)},on:{change:function(e){var s=t.tempProduct.is_enabled,a=e.target,i=a.checked?1:0;if(Array.isArray(s)){var o=null,r=t._i(s,o);a.checked?r<0&&t.$set(t.tempProduct,"is_enabled",s.concat([o])):r>-1&&t.$set(t.tempProduct,"is_enabled",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.tempProduct,"is_enabled",i)}}}),e("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v(" 是否啟用 ")])])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.hideModal("productModal")}}},[t._v(" 取消 ")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateProduct}},[t._v("確認")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[e("div",{staticClass:"modal-header bg-danger text-white"},[t._m(2),e("button",{staticClass:"btn-close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(e){return t.hideModal("delProductModal")}}})]),e("div",{staticClass:"modal-body"},[t._v(" 是否刪除 "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempProduct.title))]),t._v(" 商品(刪除後將無法恢復)。 ")]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.hideModal("delProductModal")}}},[t._v(" 取消 ")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteProduct}},[t._v("確認刪除")])])])])])],1)},rt=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("分類")]),e("th",[t._v("產品名稱")]),e("th",[t._v("原價")]),e("th",[t._v("售價")]),e("th",[t._v("是否啟用")]),e("th",{staticClass:"text-center"},[t._v("編輯")])])])},function(){var t=this,e=t._self._c;return e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",{staticClass:"white"},[t._v("新增產品")])])},function(){var t=this,e=t._self._c;return e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",{staticClass:"white"},[t._v("刪除產品")])])}],nt=s(2166),ct=function(){var t=this,e=t._self._c;return e("div",[e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination pagination-primary"},[e("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.$emit("pageEvent",t.pagination.current_page-1)}}},[t._m(0)])]),t._l(t.pagination.total_pages,(function(s){return e("li",{key:s,staticClass:"page-item",class:{active:t.pagination.current_page===s}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$emit("pageEvent",s)}}},[t._v(" "+t._s(s)+" ")])])})),e("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.$emit("pageEvent",t.pagination.current_page+1)}}},[t._m(1)])])],2)])])},lt=[function(){var t=this,e=t._self._c;return e("span",{attrs:{"aria-hidden":"true"}},[e("i",{staticClass:"bi bi-chevron-left"})])},function(){var t=this,e=t._self._c;return e("span",{attrs:{"aria-hidden":"true"}},[e("i",{staticClass:"bi bi-chevron-right"})])}],dt={name:"PaginationView",props:{pagination:Object}},ut=dt,pt=(0,h.Z)(ut,ct,lt,!1,null,null,null),mt=pt.exports,vt={name:"ProductsView",components:{Pagination:mt},data(){return{products:[],tempProduct:{},isNew:!1,isLoading:!1,status:{fileUploadLoading:!1},pagination:{}}},methods:{getProducts(t=1){const e=`https://vue-course-api.hexschool.io/api/jessie/admin/products?page=${t}`,s=this;s.isLoading=!0,this.$http.get(e).then((t=>{s.products=t.data.products,s.pagination=t.data.pagination,s.isLoading=!1}))},openModal(t,e){t?(this.tempProduct={},this.isNew=!0):(this.tempProduct={...e},this.isNew=!1);const s=document.getElementById("productModal"),a=nt.u_.getOrCreateInstance(s);a.show()},hideModal(t="productModal"){const e=document.getElementById(t),s=nt.u_.getOrCreateInstance(e);s.hide()},updateProduct(){let t="https://vue-course-api.hexschool.io/api/jessie/admin/product",e="post";const s=this;s.isNew||(t=`https://vue-course-api.hexschool.io/api/jessie/admin/product/${s.tempProduct.id}`,e="put"),this.$http[e](t,{data:s.tempProduct}).then((t=>{t.data.success,s.hideModal("productModal"),s.getProducts()}))},openDeleteModal(t){this.tempProduct={...t};const e=document.getElementById("delProductModal"),s=nt.u_.getOrCreateInstance(e);s.show()},deleteProduct(){const t=this,e=`https://vue-course-api.hexschool.io/api/jessie/admin/product/${t.tempProduct.id}`;this.$http.delete(e).then((e=>{e.data.success,t.hideModal("delProductModal"),t.getProducts()}))},uploadFile(){const t=this.$refs.files.files[0],e=this,s=new FormData;s.append("file-to-upload",t);const a="https://vue-course-api.hexschool.io/api/jessie/admin/upload";e.status.fileUploadLoading=!0,this.$http.post(a,s,{headers:{"Content-Type":"multipart/form-data"}}).then((t=>{t.data.success?e.$set(e.tempProduct,"imageUrl",t.data.imageUrl):this.$bus.$emit("message:push",t.data.message,"danger"),e.status.fileUploadLoading=!1}))}},created(){this.getProducts()}},ht=vt,gt=(0,h.Z)(ht,ot,rt,!1,null,null,null),ft=gt.exports,bt=function(){var t=this,e=t._self._c;return e("div",[t.isLoading?e("div",{staticClass:"spinner-loading is-active is-full-page"},[e("div",{staticClass:"loading-background"}),e("img",{staticClass:"loading-icon",attrs:{src:s(578),alt:"audio"}})]):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover mb-0"},[t._m(0),e("tbody",t._l(t.orders,(function(s){return e("tr",{key:s.id},[e("td",[t._v(t._s(t._f("date")(s.create_at)))]),e("td",[t._v(t._s(s.user.email))]),e("td",[e("ul",{staticClass:"list-unstyled"},t._l(s.products,(function(s,a){return e("li",{key:a},[t._v(" "+t._s(s.product.title)+" 數量："+t._s(s.qty)+" "+t._s(s.product.unit)+" ")])})),0)]),e("td",{staticClass:"text-end"},[t._v(t._s(t._f("currency")(s.total)))]),e("td",[s.is_paid?e("span",{staticClass:"text-success fw-bolder"},[t._v("已付款")]):e("span",[t._v("尚未啟用")])])])})),0)])])])])]),e("Pagination",{attrs:{pagination:t.pagination},on:{pageEvent:e=>t.getOrders(e)}})],1)},_t=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("購買時間")]),e("th",[t._v("Email")]),e("th",[t._v("購買款項")]),e("th",[t._v("應付金額")]),e("th",[t._v("是否付款")])])])}],Ct={name:"OrdersView",components:{Pagination:mt},data(){return{orders:[],isLoading:!1,pagination:{}}},methods:{getOrders(t=1){const e=`https://vue-course-api.hexschool.io/api/jessie/admin/orders?page=${t}`,s=this;s.isLoading=!0,this.$http.get(e).then((t=>{s.orders=t.data.orders,s.pagination=t.data.pagination,s.isLoading=!1}))}},created(){this.getOrders()}},kt=Ct,yt=(0,h.Z)(kt,bt,_t,!1,null,null,null),xt=yt.exports,wt=function(){var t=this,e=t._self._c;return e("div",[t.isLoading?e("div",{staticClass:"spinner-loading is-active is-full-page"},[e("div",{staticClass:"loading-background"}),e("img",{staticClass:"loading-icon",attrs:{src:s(578),alt:"audio"}})]):t._e(),e("div",{staticClass:"text-end my-4"},[e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openTicketModal(!0)}}},[t._v("建立新的優惠券")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover mb-0"},[t._m(0),e("tbody",t._l(t.tickets,(function(s){return e("tr",{key:s.id},[e("td",[t._v(t._s(s.title))]),e("td",[t._v(t._s(s.percent)+"%")]),e("td",[t._v(t._s(s.due_date))]),e("td",[s.is_enabled?e("span",{staticClass:"text-success fw-bolder"},[t._v("啟用")]):e("span",[t._v("未啟用")])]),e("td",{staticClass:"d-flex justify-content-between"},[e("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.openTicketModal(!1,s)}}},[t._v(" 編輯 ")])])])})),0)])])])])]),e("Pagination",{attrs:{pagination:t.pagination},on:{pageEvent:e=>t.getTickets(e)}}),e("div",{staticClass:"modal fade",attrs:{id:"ticketModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[e("div",{staticClass:"modal-header bg-primary text-white"},[t._m(1),e("button",{staticClass:"btn-close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.hideTicketModal}})]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-group mb-3"},[e("label",{attrs:{for:"title"}},[t._v("標題")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempTicket.title,expression:"tempTicket.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempTicket.title},on:{input:function(e){e.target.composing||t.$set(t.tempTicket,"title",e.target.value)}}})]),e("div",{staticClass:"form-group mb-3"},[e("label",{attrs:{for:"code"}},[t._v("優惠碼")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempTicket.code,expression:"tempTicket.code"}],staticClass:"form-control",attrs:{type:"text",id:"code",placeholder:"請輸入優惠碼"},domProps:{value:t.tempTicket.code},on:{input:function(e){e.target.composing||t.$set(t.tempTicket,"code",e.target.value)}}})]),e("div",{staticClass:"form-group mb-3"},[e("label",{attrs:{for:"due_date"}},[t._v("到期日")]),e("FlatPickr",{staticClass:"form-control",attrs:{placeholder:"請輸入到期日",name:"date"},model:{value:t.tempTicket.due_date,callback:function(e){t.$set(t.tempTicket,"due_date",e)},expression:"tempTicket.due_date"}})],1),e("div",{staticClass:"form-group mb-3"},[e("label",{attrs:{for:"percent"}},[t._v("折扣百分比")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempTicket.percent,expression:"tempTicket.percent"}],staticClass:"form-control",attrs:{type:"number",id:"percent",placeholder:"請輸入折扣百分比"},domProps:{value:t.tempTicket.percent},on:{input:function(e){e.target.composing||t.$set(t.tempTicket,"percent",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempTicket.is_enabled,expression:"tempTicket.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox","true-value":1,"false-value":0,id:"is_enabled"},domProps:{checked:Array.isArray(t.tempTicket.is_enabled)?t._i(t.tempTicket.is_enabled,null)>-1:t._q(t.tempTicket.is_enabled,1)},on:{change:function(e){var s=t.tempTicket.is_enabled,a=e.target,i=a.checked?1:0;if(Array.isArray(s)){var o=null,r=t._i(s,o);a.checked?r<0&&t.$set(t.tempTicket,"is_enabled",s.concat([o])):r>-1&&t.$set(t.tempTicket,"is_enabled",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.tempTicket,"is_enabled",i)}}}),e("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v(" 是否啟用 ")])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.hideTicketModal}},[t._v(" 取消 ")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateTicket}},[t.isNew?[t._v(" 確認 ")]:[t._v(" 更新優惠券 ")]],2)])])])])],1)},Pt=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("名稱")]),e("th",[t._v("折扣百分比")]),e("th",[t._v("到期日")]),e("th",[t._v("是否啟用")]),e("th",[t._v("編輯")])])])},function(){var t=this,e=t._self._c;return e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",{staticClass:"white"},[t._v("新增優惠券")])])}],$t={name:"TicketView",components:{Pagination:mt},data(){return{tickets:[],tempTicket:{title:"",is_enabled:0,percent:100,due_date:0,code:""},isNew:!1,isLoading:!1,pagination:{},due_date:new Date}},methods:{getTickets(t=1){const e=`https://vue-course-api.hexschool.io/api/jessie/admin/coupons?page=${t}`,s=this;s.isLoading=!0,this.$http.get(e).then((t=>{s.tickets=t.data.coupons,s.pagination=t.data.pagination,s.isLoading=!1}))},openTicketModal(t,e){t?(this.tempTicket={},this.isNew=!0):(this.tempTicket={...e},this.isNew=!1);const s=document.getElementById("ticketModal"),a=nt.u_.getOrCreateInstance(s);a.show()},hideTicketModal(){const t=document.getElementById("ticketModal"),e=nt.u_.getOrCreateInstance(t);e.hide()},updateTicket(){let t="https://vue-course-api.hexschool.io/api/jessie/admin/coupon",e="post";const s=this;s.isNew||(t=`https://vue-course-api.hexschool.io/api/jessie/admin/coupon/${s.tempTicket.id}`,e="put"),this.$http[e](t,{data:s.tempTicket}).then((t=>{t.data.success,s.hideTicketModal(),s.getTickets()}))}},created(){this.getTickets()},watch:{due_date(){const t=this,e=Math.floor(new Date(t.due_date)/1e3);t.tempTicket.due_date=e}}},Lt=$t,Mt=(0,h.Z)(Lt,wt,Pt,!1,null,null,null),Tt=Mt.exports,Et=function(){var t=this,e=t._self._c;return e("div",[t.isLoading?e("div",{staticClass:"spinner-loading is-active is-full-page"},[e("div",{staticClass:"loading-background"}),e("img",{staticClass:"loading-icon",attrs:{src:s(578),alt:"audio"}})]):t._e(),e("div",{staticClass:"row mt-4 border-bottom"},t._l(t.products,(function(s){return e("div",{key:s.id,staticClass:"col-md-4 mb-4"},[e("div",{staticClass:"card border-0 shadow-sm"},[e("div",{staticStyle:{height:"150px","background-size":"cover","background-position":"center"},style:{backgroundImage:`url(${s.imageUrl})`}}),e("div",{staticClass:"card-body"},[e("div",{staticClass:"d-flex justify-content-between"},[e("h5",{staticClass:"card-title"},[t._v(" "+t._s(s.title)+" ")]),e("h5",[e("span",{staticClass:"badge bg-secondary ml-2"},[t._v(t._s(s.category))])])]),e("p",{staticClass:"card-text"},[t._v(t._s(s.content))]),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[s.price?t._e():e("div",{staticClass:"h5"},[t._v(t._s(s.origin_price)+" 元")]),s.price?e("div",{staticClass:"h6 text-decoration-line-through"},[t._v(" 原價 "+t._s(s.origin_price)+" 元 ")]):t._e(),s.price?e("div",{staticClass:"h5"},[t._v("現在只要 "+t._s(s.price)+" 元")]):t._e()])]),e("div",{staticClass:"card-footer d-flex justify-content-between"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.getProduct(s.id)}}},[t.status.loadingItem===s.id?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 查看更多 ")]),e("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(e){return t.addtoCart(s.id,s.qty)}}},[t.status.loadingItem===s.id?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 加到購物車 ")])])])])})),0),t.cart.carts&&t.cart.carts.length?e("div",{staticClass:"my-5 row justify-content-center"},[e("div",{staticClass:"w-50"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover mb-0"},[t._m(0),e("tbody",t._l(t.cart.carts,(function(s){return e("tr",{key:s.id},[e("td",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.removeCartItem(s.id)}}},[e("i",{staticClass:"bi bi-trash-fill"})])]),e("td",{staticClass:"align-middle"},[t._v(" "+t._s(s.product.title)+" "),s.coupon?e("div",{staticClass:"text-success"},[t._v(" 已套用優惠券 ")]):t._e()]),e("td",{staticClass:"align-middle"},[t._v(t._s(s.qty)+"/"+t._s(s.product.unit))]),e("td",{staticClass:"align-middle text-end"},[t._v(t._s(t._f("currency")(s.final_total)))])])})),0),e("tfoot",[e("tr",[e("td",{staticClass:"text-end",attrs:{colspan:"3"}},[t._v("總計")]),e("td",{staticClass:"text-end"},[t._v(t._s(t._f("currency")(t.cart.total)))])]),t.cart.final_total!==t.cart.total?e("tr",[e("td",{staticClass:"text-end text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),e("td",{staticClass:"text-success text-end"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])]):t._e()])])])])])]),e("div",{staticClass:"input-group mb-3 input-group-sm"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control me-4",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.addCuponCode}},[t._v(" 套用優惠碼 ")])])])])]):t._e(),t.cart.carts&&t.cart.carts.length?e("div",{staticClass:"my-5 row justify-content-center"},[e("validation-observer",{staticClass:"col-md-6",scopedSlots:t._u([{key:"default",fn:function({invalid:s}){return[e("form",{on:{submit:function(e){return e.preventDefault(),t.createOrder.apply(null,arguments)}}},[e("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function({errors:s,classes:a}){return[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:a,attrs:{id:"email",type:"email",name:"email",placeholder:"輸入email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])])]}}],null,!0)}),e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:s,classes:a}){return[e("div",{staticClass:"form-group mt-3"},[e("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",class:a,attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])])]}}],null,!0)}),e("validation-provider",{attrs:{rules:"required|digits:10"},scopedSlots:t._u([{key:"default",fn:function({errors:s,classes:a}){return[e("div",{staticClass:"form-group mt-3"},[e("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",class:a,attrs:{type:"tel",name:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(" "+t._s(s[0])+" ")])])]}}],null,!0)}),e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:s,classes:a}){return[e("div",{staticClass:"form-group mt-3"},[e("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",class:a,attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])])]}}],null,!0)}),e("div",{staticClass:"form-group mt-3"},[e("label",{attrs:{for:"comment"}},[t._v("留言")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),e("div",{staticClass:"text-end mt-3"},[e("button",{staticClass:"btn btn-danger",attrs:{type:"submit",disabled:s}},[t._v("送出訂單")])])],1)]}}],null,!1,646237622)})],1):t._e(),e("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.product.title))]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(e){return t.hideModal("productModal")}}})]),e("div",{staticClass:"modal-body"},[e("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:""}}),e("blockquote",{staticClass:"blockquote mt-3"},[e("p",{staticClass:"mb-0"},[t._v(t._s(t.product.content))]),e("footer",{staticClass:"blockquote-footer text-end mt-3"},[t._v(t._s(t.product.description))])]),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.product.price?t._e():e("div",{staticClass:"h4"},[t._v(t._s(t.product.origin_price)+" 元")]),t.product.price?e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t.product.origin_price)+" 元")]):t._e(),t.product.price?e("div",{staticClass:"h4"},[t._v("現在只要 "+t._s(t.product.price)+" 元")]):t._e()]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"form-select",attrs:{"aria-label":"Default select example"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"num",e.target.multiple?s:s[0])}}},t._l(10,(function(s){return e("option",{key:s,domProps:{value:s}},[t._v(" 選購 "+t._s(s)+" "+t._s(t.product.unit)+" ")])})),0)]),e("div",{staticClass:"modal-footer"},[e("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v(" 小計 "),e("strong",[t._v(t._s(t.product.num*t.product.price))]),t._v(" 元 ")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.addtoCart(t.product.id,t.product.num)}}},[t.product.id===t.status.loadingItem?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 加到購物車 ")])])])])])])},Ot=[function(){var t=this,e=t._self._c;return e("thead",[e("th"),e("th",[t._v("品名")]),e("th",[t._v("數量")]),e("th",{attrs:{width:"120"}},[t._v("單價")])])}],jt={name:"CustomerOrders",data(){return{products:[],product:{},status:{loadingItem:""},isLoading:!1,cart:{},coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getProducts(t=1){const e=`https://vue-course-api.hexschool.io/api/jessie/products?page=${t}`,s=this;s.isLoading=!0,this.$http.get(e).then((t=>{s.products=t.data.products,s.isLoading=!1}))},getProduct(t){const e=`https://vue-course-api.hexschool.io/api/jessie/product/${t}`,s=this;s.status.loadingItem=t,this.$http.get(e).then((t=>{s.product=t.data.product;const e=document.getElementById("productModal"),a=nt.u_.getOrCreateInstance(e);a.show(),s.status.loadingItem=""}))},hideModal(t="productModal"){const e=document.getElementById(t),s=nt.u_.getOrCreateInstance(e);s.hide()},addtoCart(t,e=1){const s="https://vue-course-api.hexschool.io/api/jessie/cart",a=this;a.status.loadingItem=t;const i={product_id:t,qty:e};this.$http.post(s,{data:i}).then((()=>{a.getCarts(),a.hideModal("productModal"),a.status.loadingItem=""}))},getCarts(){const t="https://vue-course-api.hexschool.io/api/jessie/cart",e=this;e.isLoading=!0,this.$http.get(t).then((t=>{e.cart=t.data.data,e.isLoading=!1}))},removeCartItem(t){const e=`https://vue-course-api.hexschool.io/api/jessie/cart/${t}`,s=this;s.isLoading=!0,this.$http.delete(e).then((()=>{s.getCarts(),s.isLoading=!1}))},addCuponCode(){const t="https://vue-course-api.hexschool.io/api/jessie/coupon",e=this,s={code:e.coupon_code};e.isLoading=!0,this.$http.post(t,{data:s}).then((t=>{t.data.success||this.$bus.$emit("message:push",t.data.message,"danger"),e.getCarts(),e.isLoading=!1}))},createOrder(){const t="https://vue-course-api.hexschool.io/api/jessie/order",e=this,s=e.form;this.$http.post(t,{data:s}).then((t=>{t.data.success&&e.$router.push(`/customer_checkout/${t.data.orderId}`)}))}},created(){this.getProducts(),this.getCarts()}},It=jt,Nt=(0,h.Z)(It,Et,Ot,!1,null,null,null),St=Nt.exports,Zt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-5 row justify-content-center"},[t.isLoading?e("div",{staticClass:"spinner-loading is-active is-full-page"},[e("div",{staticClass:"loading-background"}),e("img",{staticClass:"loading-icon",attrs:{src:s(578),alt:"audio"}})]):t._e(),e("form",{staticClass:"col-md-6",on:{submit:function(e){return e.preventDefault(),t.payOrder.apply(null,arguments)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("table",{staticClass:"table table-striped mb-0"},[t._m(0),e("tbody",t._l(t.order.products,(function(s){return e("tr",{key:s.id},[e("td",{staticClass:"align-middle text-start"},[t._v(t._s(s.product.title))]),e("td",{staticClass:"align-middle text-center"},[t._v(t._s(s.qty)+"/"+t._s(s.product.unit))]),e("td",{staticClass:"align-middle text-end"},[t._v(t._s(s.final_total))])])})),0),e("tfoot",[e("tr",[e("td",{staticClass:"text-end",attrs:{colspan:"2"}},[t._v("總計")]),e("td",{staticClass:"text-end"},[t._v(t._s(t.order.total))])])])])])])]),e("table",{staticClass:"table"},[e("tbody",[e("tr",[e("th",{attrs:{width:"100"}},[t._v("Email")]),e("td",[t._v(t._s(t.order.user.email))])]),e("tr",[e("th",[t._v("姓名")]),e("td",[t._v(t._s(t.order.user.name))])]),e("tr",[e("th",[t._v("收件人電話")]),e("td",[t._v(t._s(t.order.user.tel))])]),e("tr",[e("th",[t._v("收件人地址")]),e("td",[t._v(t._s(t.order.user.address))])]),e("tr",[e("th",[t._v("付款狀態")]),e("td",[t.order.is_paid?e("span",{staticClass:"text-success fw-bolder"},[t._v("付款完成")]):e("span",[t._v("尚未付款")])])])])]),!1===t.order.is_paid?e("div",{staticClass:"text-end"},[e("button",{staticClass:"btn btn-danger"},[t._v("確認付款去")])]):t._e()])])},At=[function(){var t=this,e=t._self._c;return e("thead",[e("th",{staticClass:"text-start ps-2"},[t._v("品名")]),e("th",{staticClass:"text-center"},[t._v("數量")]),e("th",{staticClass:"text-center"},[t._v("單價")])])}],qt={name:"CustomerChckout",data(){return{order:{user:{}},orderId:"",isLoading:!1}},methods:{getOrder(){const t=this,e=`https://vue-course-api.hexschool.io/api/jessie/order/${t.orderId}`;t.isLoading=!0,this.$http.get(e).then((e=>{t.order=e.data.order,t.isLoading=!1}))},payOrder(){const t=this,e=`https://vue-course-api.hexschool.io/api/jessie/pay/${t.orderId}`;this.$http.post(e).then((e=>{e.data.success&&(t.getOrder(),this.$bus.$emit("message:push",e.data.message,"success"))}))}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},Bt=qt,Dt=(0,h.Z)(Bt,Zt,At,!1,null,null,null),Ut=Dt.exports;a.ZP.use(_.ZP);const Ft=[{path:"*",redirect:"login"},{path:"/login",name:"Login",component:P},{path:"/admin",name:"Dashboard",component:it,children:[{path:"products",name:"Products",component:ft,meta:{requiresAuth:!0}},{path:"orders",name:"Orders",component:xt,meta:{requiresAuth:!0}},{path:"ticket",name:"Ticket",component:Tt,meta:{requiresAuth:!0}}]},{path:"/",component:it,children:[{path:"customer_order",name:"CustomerOrders",component:St},{path:"customer_checkout/:orderId",name:"CustomerCheckout",component:Ut}]}],Vt=new _.ZP({routes:Ft});var zt=Vt;a.ZP.prototype.$bus=new a.ZP;s(4254);function Rt(t){const e=Number(t);return`$${e.toFixed(0).replace(/./g,((t,e,s)=>{const a=e&&"."!==t&&(s.length-e)%3===0?`, ${t}`.replace(/\s/g,""):t;return a}))}`}function Wt(t){const e=new Date(1e3*t);return e.toLocaleDateString()}a.ZP.config.productionTip=!1,a.ZP.use(o.Z,i.Z),Object.keys(d).forEach((t=>{(0,c.l7)(t,d[t])})),(0,c.NC)("zh_TW",l),a.ZP.component("ValidationObserver",c._j),a.ZP.component("ValidationProvider",c.d_),(0,c.jQ)({classes:{valid:"is-valid",invalid:"is-invalid"}}),a.ZP.component("Loading",n()),a.ZP.component("FlatPickr",p()),a.ZP.filter("currency",Rt),a.ZP.filter("date",Wt),i.Z.defaults.withCredentials=!0,new a.ZP({router:zt,render:t=>t(b)}).$mount("#app"),zt.beforeEach(((t,e,s)=>{if(t.meta.requiresAuth){const t="https://vue-course-api.hexschool.io/api/user/check";i.Z.post(t).then((t=>{t.data.success?s():s({path:"/login"})}))}else s()}))},578:function(t,e,s){"use strict";t.exports=s.p+"img/ball-triangle.8d25ff73.svg"},3397:function(t,e,s){"use strict";t.exports=s.p+"img/3.cde60886.jpg"}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var o=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=t,function(){s.amdO={}}(),function(){var t=[];s.O=function(e,a,i,o){if(!a){var r=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],o=t[d][2];for(var n=!0,c=0;c<a.length;c++)(!1&o||r>=o)&&Object.keys(s.O).every((function(t){return s.O[t](a[c])}))?a.splice(c--,1):(n=!1,o<r&&(r=o));if(n){t.splice(d--,1);var l=i();void 0!==l&&(e=l)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[a,i,o]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/vue-dashboard-record/"}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,o,r=a[0],n=a[1],c=a[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(c)var d=c(s)}for(e&&e(a);l<r.length;l++)o=r[l],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(d)},a=self["webpackChunkvue_dashboard_record"]=self["webpackChunkvue_dashboard_record"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(1949)}));a=s.O(a)})();
//# sourceMappingURL=app.c7bfabfa.js.map